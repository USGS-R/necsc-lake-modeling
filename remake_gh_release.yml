target_default: data_release

packages:
  - yaml
  - xml2
  - whisker
  
sources:
  - scripts/create_FGDC_template.R
  - scripts/render_FGDC_metadata.R
  - scripts/summarize_dataset_attributes.R
  
targets:
  data_release:
    depends: 
      - gh_release/ECHAM5_model.xml

  gh_release/FGDC_template.mustache:
    command: create_FGDC_template(target_name)
  
  habitat.table:
    command: read_habitat_metrics('data/habitat_metrics_table_GH.csv')
    
  timeseries.text:
    command: yaml.load_file("gh_release/text_ECHAM5_model.yaml")
    
  echam.args:
    command: summarize_dataset_attributes('data/ECHAM5_all_habitat.tsv')

  gh_release/ECHAM5_model.xml:
    command: render_FGDC_metadata("gh_release/FGDC_template.mustache", timeseries.text, target_name, habitat.table)
