packages:
  - yaml
  - dplyr
  - geoknife
  - rgdal
  - XML
  - doMC
  - foreach
  
## All R files that are used must be listed here:
sources:
  - scripts/load_config.R
  - scripts/lake_summary_locations.R
  - scripts/lake_summary_nldas.R
  - scripts/get_raw_nldas_nc.R


targets:
  ## 'all' is a special target that will be used as the default
  ## target by 'remake'.  It doesn't actually make anything but
  ## "depends" on other targets.
  all:
    depends: 
      - data/nldas_lakes.txt
      - data/NLDAS_sub/nldas_miwimn.ncml
      - data/NLDAS_sub/NLDAS_sub_status.txt
      - data/NLDAS_data/NLDAS_driver_file_list.tsv

  #data/nldas_lakes.txt:
  #  command: lake_summary_nldas(project_lake_locations, nldas_config)

  data/NLDAS_sub/nldas_miwimn.ncml:
    command: create_nldas_ncml(nldas_config)

  project_lake_locations:
    command: lake_summary_locations()
    depends: 
      - ncml

  data/NLDAS_sub/NLDAS_file_list.tsv:
    command: calc_nldas_files(nldas_config, nhd_config)

  data/NLDAS_sub/NLDAS_sub_status.txt:
    command: nccopy_nldas()
    depends: 
      - data/NLDAS_sub/NLDAS_file_list.tsv

  nldas_config:
    command: load_config("configs/NLDAS_config.yml")

  nhd_config:
    command: load_config("configs/NHD_config.yml")

  ncml:
    command: sync_ncml("data/NLDAS_sub/nldas_miwimn.ncml")

  nhd_states:
    command: write_nhd_shp(nhd_config)

  data/NLDAS_data/NLDAS_driver_file_list.tsv:
    command: calc_nldas_driver_files(nldas_config,project_lake_locations)

